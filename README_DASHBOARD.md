# دليل استخدام الويب داش بورد

## الميزات المضافة

### 1. نظام الموافقة على الطلبات
- ✅ منع الطلاب من نشر العروض مباشرة
- ✅ إرسال جميع الطلبات إلى مجموعة المشرفين للموافقة
- ✅ إمكانية قبول أو رفض الطلبات من:
  - مجموعة Telegram للمشرفين
  - الويب داش بورد

### 2. الويب داش بورد
- ✅ تسجيل دخول بإيميل وكلمة سر
- ✅ عرض الإحصائيات
- ✅ إدارة الخدمات (عرض، قبول، رفض)
- ✅ إدارة الطلبات (عرض، قبول، رفض)
- ✅ إدارة المستخدمين

## الإعداد

### 1. تثبيت المكتبات المطلوبة

```bash
pip install -r requirements.txt
```

### 2. إعداد ملف .env

أضف هذه المتغيرات إلى ملف `.env`:

```env
# Web Dashboard
WEB_DASHBOARD_EMAIL=admin@dtcjob.com
WEB_DASHBOARD_PASSWORD=admin123
WEB_DASHBOARD_SECRET_KEY=your-secret-key-change-this-in-production
WEB_DASHBOARD_PORT=8000

# Admin Group
ADMIN_GROUP_ID=-1003482966379
```

### 3. تحديث قاعدة البيانات

قم بتشغيل migration script لتحديث عمود `telegram_id`:

```bash
python migrate_telegram_id.py
```

أو قم بتشغيل هذا الأمر يدوياً في PostgreSQL:

```sql
ALTER TABLE users ALTER COLUMN telegram_id TYPE BIGINT;
```

### 4. تشغيل الويب داش بورد

```bash
python web_dashboard.py
```

ثم افتح المتصفح على: `http://localhost:8000`

## استخدام الويب داش بورد

1. **تسجيل الدخول**: استخدم الإيميل وكلمة المرور المحددة في `.env`
2. **الصفحة الرئيسية**: عرض الإحصائيات والطلبات في الانتظار
3. **الخدمات**: عرض جميع الخدمات وقبول/رفض الخدمات في الانتظار
4. **الطلبات**: عرض جميع الطلبات وقبول/رفض الطلبات في الانتظار
5. **المستخدمون**: عرض جميع المستخدمين

## استخدام مجموعة المشرفين

عندما يقدم طالب خدمة أو طلب:
1. يتم إرسال الطلب تلقائياً إلى مجموعة المشرفين
2. يمكن للمشرفين قبول أو رفض الطلب من خلال الأزرار في الرسالة
3. عند القبول، يتم نشر الطلب في القناة المخصصة
4. يتم إشعار المستخدم بنتيجة الموافقة

## ملاحظات مهمة

- ⚠️ تأكد من تحديث `ADMIN_GROUP_ID` في `.env` بمجموعة المشرفين الفعلية
- ⚠️ غير `WEB_DASHBOARD_PASSWORD` و `WEB_DASHBOARD_SECRET_KEY` في الإنتاج
- ⚠️ تأكد من أن البوت عضو في مجموعة المشرفين وله صلاحيات إرسال الرسائل

